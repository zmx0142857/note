<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>å¤å…¸å¯†ç </title>
  <link rel="stylesheet" href="../../css/note.css">
<style>
body {
  max-width: unset;
}
/* é€šç”¨ */
.align-center {
  display: flex;
  align-items: center;
  gap: 8px;
}
.inline-block {
  display: inline-block;
}

/* ç›²æ–‡ */
.braille-input {
  display: inline-block;
  width: 4.5em;
}
.braille-dot {
  display: inline-block;
  height: 2em;
  width: 2em;
  border-radius: 50%;
  border: 1px solid #aaa;
  cursor: pointer;
  transition: 0.2s background;
}
.braille-display {
  text-align: center;
  font-size: 1.5em;
}
.braille-dot.filled {
  background: #555;
}
.braille-switch {
  width: 50px;
  height: 20px;
  vertical-align: middle;
}

/* æ——è¯­ */
.flag-input {
  display: inline-block;
  width: 8em;
}
.flag-direction,
.flag-center {
  display: inline-block;
  height: 2em;
  width: 2em;
  vertical-align: middle;
  margin: 0.2em;
}
.flag-direction {
  border-radius: 0.2em;
  border: 1px solid #333;
  cursor: pointer;
  transition: 0.2s background;
  text-align: center;
  line-height: 2em;
}
.flag-direction.filled {
  background: #555;
}
/* çŒªåœˆ */
@font-face {
  font-family: "hogpen";
  src: url("../../font/pigpass-font.woff") format("woff");
}
#hogpen-playground textarea,
#table-hogpen td:nth-child(2n) {
  font-family: "hogpen";
}

/* tabs */
.tabs {
  background: #181818;
}
.tabs .tabs-body {
  height: 700px;
}
.tabs .tabs-footer {
  border-left-color: #181818;
}
.tabs .tabs-body-item pre {
  background-color: rgba(0,0,0,0.2);
}

/* lens */
#lens-canvas, #paint-by-numbers-canvas {
  width: 100%;
  background: #333;
}
#lens-canvas {
  height: calc(100% - 40px);
}

/* æ°¨åŸºé…¸ */
#table-amino {
  min-width: 600px;
}
#table-amino .bd-b {
  border-bottom: 1px solid #aaa;
}
</style>
</head>
<body class="dark">

<div class="tabs">
  <div class="tabs-body">
    <div id="tabs-a1z26" class="tabs-body-item">
      <table id="table-a1z26" class="col2"></table>

      <div class="playground" type="textarea" value="sleep" value2="19 12 5 5 16">

      <p>è¯´æ˜: è¾“å…¥è‹±æ–‡, è½¬ä¸ºæ•°å­—; è¾“å…¥ç©ºæ ¼åˆ†éš”çš„æ•°å­—, è½¬ä¸ºè‹±æ–‡.</p>
      <script type="text">
      module.exports = function a1z26 (str) {
        if (/[a-zA-Z]/.test(str)) {
          return [...str].map(c => puzzle.convert(c, { from: 'char', to: 'number' })).join(' ')
        }
        return str.split(/[^0-9]/).map(n => puzzle.convert(Number(n), { from: 'number', to: 'char' })).join('')
      }
      </script>
      </div>
      <p class="remark">äºŒè¿›åˆ¶å­—æ¯åºç¼–ç åˆå«åŸ¹æ ¹å¯†ç , ä½¿ç”¨ 5 ä¸ª bit è¡¨ç¤ºä¸€ä¸ªå­—æ¯.</p>
    </div>
    <div id="tabs-ascii" class="tabs-body-item">
      <table id="table-ascii" class="col2"></table>
      <div class="playground" type="textarea" value="sleep" value2="73 6c 65 65 70">
        <p>è¯´æ˜: è¾“å…¥è‹±æ–‡, è½¬ä¸º ascii; è¾“å…¥ ascii, è½¬ä¸ºè‹±æ–‡.</p>
        <script type="text">
        module.exports = function ascii (str) {
          const { chunk, ord, chr } = puzzle.utils
          if (/[0-9]/.test(str)) {
            return chunk(str.replace(/\s/g, ''), 2).map(n => chr(parseInt('0x' + n))).join('')
          }
          return str.replace(/\s/g, '').split('').map(c => ord(c).toString(16).padStart(2, '0')).join(' ')
        }
        </script>
      </div>
    </div>
    <div id="tabs-morse" class="tabs-body-item">
      <table id="table-morse" class="col2"></table>

      <div class="playground" type="textarea" value="-- --- .-. ... .
-.-. --- -.. ." value2="morse code">

      <p>è¯´æ˜: è¾“å…¥è‹±æ–‡, è½¬ä¸ºæ‘©æ–¯ç ; è¾“å…¥æ‘©æ–¯ç , è½¬ä¸ºè‹±æ–‡.</p>
      <script type="text">
      module.exports = function morse (str) {
        if (/[a-zA-Z]/.test(str)) {
          return str.split(/\s+/).map(line => [...line].filter(c => /[a-zA-Z]/.test(c)).map(c => puzzle.convert(c, { from: 'char', to: 'morse' })).join('/')).join('\n')
        }
        return str.split('\n').map(line => line.split(/[^-_.]+/).map(m => puzzle.convert(m, { from: 'morse', to: 'char' })).join('')).join(' ')
      }
      </script>
      </div>
    </div>
    <div id="tabs-cantor" class="tabs-body-item">
      <table id="table-cantor" class="col2"></table>
      <div class="playground" type="textarea" value="1324 1234 3142 4132 3214 3421" value2="cantor">
        <p>è¯´æ˜: è¾“å…¥è‹±æ–‡, è½¬ä¸º Cantor; è¾“å…¥ Cantor, è½¬ä¸ºè‹±æ–‡.</p>
        <script type="text">
        module.exports = function cantor (str) {
          if (/[a-zA-Z]/.test(str)) {
            return str.split(/\s+/).map(line => [...line].filter(c => /[a-zA-Z]/.test(c)).map(c => puzzle.convert(c, { from: 'char', to: 'cantor' })).join(' ')).join('\n')
          }
          return str.split('\n').map(line => line.split(/[^1-4]+/).map(m => puzzle.convert(m, { from: 'cantor', to: 'char' })).join('')).join(' ')
        }
        </script>
      </div>
    </div>
    <div id="tabs-nato" class="tabs-body-item">
      <table id="table-nato" class="col2"></table>
    </div>
    <div id="tabs-cellphone" class="tabs-body-item">
      <table id="table-cellphone" class="col2">
        <caption>æ‰‹æœºä¹é”®ç¼–ç </caption>
        <tr>
          <td><p>1</p><p>-</p></td>
          <td><p>2</p><p>ABC</p></td>
          <td><p>3</p><p>DEF</p></td>
        </tr>
        <tr>
          <td><p>4</p><p>GHI</p></td>
          <td><p>5</p><p>JKL</p></td>
          <td><p>6</p><p>MNO</p></td>
        </tr>
        <tr>
          <td><p>7</p><p>PQRS</p></td>
          <td><p>8</p><p>TUV</p></td>
          <td><p>9</p><p>WXYZ</p></td>
        </tr>
      </table>

      <div class="playground" type="textarea" value="233253537142636232" value2="cellphone">

      <p>è¯´æ˜: è¾“å…¥è‹±æ–‡, è½¬ä¸ºæ‰‹æœºä¹é”®ç¼–ç ; è¾“å…¥æ‰‹æœºä¹é”®ç¼–ç , è½¬ä¸ºè‹±æ–‡.</p>
      <script type="text">
      module.exports = function cellphone (str) {
        if (/[a-zA-Z]/.test(str)) {
          return [...str].map(c => puzzle.convert(c, { from: 'char', to: 'cellphone' })).join('')
        }

        // split into 2-chunks
        const buf = puzzle.utils.chunk(str.replace(/\s/g, ''), 2)
        return buf.map(c => puzzle.convert(c, { from: 'cellphone', to: 'char' })).join('')
      }
      </script>
      </div>
    </div>
    <div id="tabs-board" class="tabs-body-item">
      <table>
        <caption>æ£‹ç›˜å¯†ç </caption>
        <tr> <td>A</td> <td>B</td> <td>C</td> <td>D</td> <td>E</td> </tr>
        <tr> <td>F</td> <td>G</td> <td>H</td> <td>I/J</td> <td>K</td> </tr>
        <tr> <td>L</td> <td>M</td> <td>N</td> <td>O</td> <td>P</td> </tr>
        <tr> <td>Q</td> <td>R</td> <td>S</td> <td>T</td> <td>U</td> </tr>
        <tr> <td>V</td> <td>W</td> <td>X</td> <td>Y</td> <td>Z</td> </tr>
      </table>
    </div>
    <div id="tabs-flag" class="tabs-body-item">
      <table id="table-flag" class="col2"></table>

      <div class="playground" type="textarea" value="â†“â†’â†™â†—â†™â†“â†“â†˜" value2="flag">

      <p>è¯´æ˜: è¾“å…¥è‹±æ–‡, è½¬ä¸ºæ——è¯­; è¾“å…¥æ——è¯­, è½¬ä¸ºè‹±æ–‡</p>
      <div class="flag-input">
        <div class="flag-direction">â†–</div>
        <div class="flag-direction">â†‘</div>
        <div class="flag-direction">â†—</div>
        <div class="flag-direction">â†</div>
        <div class="flag-center"></div>
        <div class="flag-direction">â†’</div>
        <div class="flag-direction">â†™</div>
        <div class="flag-direction">â†“</div>
        <div class="flag-direction">â†˜</div>
      </div>
      <div class="inline-block">
        <p class="flag-display"></p>
        <input class="flag-input-btn" type="button" value="æ’å…¥" />
      </div>
      <script type="text">
      const $input = container.querySelector('.flag-input')
      const $btn = container.querySelector('.flag-input-btn')
      const $display = container.querySelector('.flag-display')
      const $textarea = container.querySelector('textarea')
      $input.char = ''
      $input.value = []
      $input.onclick = e => {
        if (!e.target.classList.contains('flag-direction')) return
        if ($input.value.length === 2) {
          [...container.querySelectorAll('.flag-direction')].forEach(el => el.classList.remove('filled'))
          $input.value.length = 0
        }
        e.target.classList.toggle('filled')
        const char = e.target.textContent
        $input.char = char
        $input.value.push(char)
        $display.textContent = flag($input.value.join(''))
      }
      $btn.onclick = () => {
        const helper = new puzzle.InputHelper($textarea)
        helper.insert($input.value.join(''))
      }
      function flag (str) {
        if (/[\u2190-\u2193\u2196-\u2199]/.test(str)) {
          const buf = puzzle.utils.chunk(str, 2)
          return buf.map(c => puzzle.convert(c, { from: 'flag', to: 'char' })).join('')
        }
        return [...str].map(c => puzzle.convert(c, { from: 'char', to: 'flag' })).join('')
      }
      module.exports = flag
      </script>
      </div>
    </div>
    <div id="tabs-signal-flag" class="tabs-body-item">
      <center style="overflow-x:auto">
      <a href="https://baike.baidu.com/item/%E5%9B%BD%E9%99%85%E4%BF%A1%E5%8F%B7%E6%97%97/6302582" target="_blank" style="display:inline-block"><img src="../img/signal-flag.gif" alt="æµ·æ——" title="æ¥è‡ª ç™¾åº¦ç™¾ç§‘" style="height:600px"/></a>
      </center>
    </div>
    <div id="tabs-braille" class="tabs-body-item">
      <table id="table-braille" class="col2"></table>
      <table id="table-braille-pinyin" class="col2"></table>

      <div class="playground" type="textarea" value="â ƒâ —â â Šâ ‡â ‡â ‘" value2="braille" value3="vme50" value4="â Œâ ² â ›â •" value5="â “â œ â “â £ â â ª â ›â ‘">

      <p>è¯´æ˜: è¾“å…¥è‹±æ–‡æˆ–æ‹¼éŸ³, è½¬ä¸ºç›²æ–‡; è¾“å…¥ç›²æ–‡, è½¬ä¸ºè‹±æ–‡æˆ–æ‹¼éŸ³</p>
      <div class="braille-input">
        <div class="braille-dot" data-index="0"></div>
        <div class="braille-dot" data-index="3"></div>
        <div class="braille-dot" data-index="1"></div>
        <div class="braille-dot" data-index="4"></div>
        <div class="braille-dot" data-index="2"></div>
        <div class="braille-dot" data-index="5"></div>
      </div>
      <div class="inline-block">
        <p class="braille-display"></p>
        <div>
          <input class="braille-input-btn" type="button" value="æ’å…¥" />
          <input class="braille-switch" type="button" value="En"/>
          <input class="braille-flip" type="button" value="åè½¬" title="æ—‹è½¬180åº¦"/>
        </div>
      </div>
      <script type="text">
      const $ = el => container.querySelector(el)
      const $input = $('.braille-input')
      const $btn = $('.braille-input-btn')
      const $display = $('.braille-display')
      const $textarea = $('textarea')
	  const $switch = $('.braille-switch')
      const $flip = $('.braille-flip')
      let mode = 'En'
      $input.value = 0
      $input.onclick = e => {
        const { chr } = puzzle.utils
        if (!e.target.classList.contains('braille-dot')) return
        e.target.classList.toggle('filled')
        const index = e.target.getAttribute('data-index')
        $input.value ^= 1 << Number(index)
        const code = chr(0x2800 + $input.value)
        $display.textContent = braille(code)
      }
      $btn.onclick = () => {
        const { chr } = puzzle.utils
        const helper = new puzzle.InputHelper($textarea)
        const code = chr(0x2800 + $input.value)
        helper.insert(code)
      }
      $switch.onclick = () => {
        mode = mode === 'En' ? 'æ‹¼éŸ³' : 'En'
        $switch.value = mode
      }
      $flip.onclick = () => {
        const { chr, ord } = puzzle.utils
        $textarea.value = [...$textarea.value].reverse().map(v => {
          const n = ord(v) - 0x2800
          if (0 <= n && n < 64) {
            return chr(0x2800 + parseInt(n.toString(2).padStart(6, 0).split('').reverse().join(''), 2))
          } else {
            return v
          }
        }).join('')
      }
      function braille (str) {
	    if (mode === 'En') {
		  if (/[\u2800-\u28ff]/.test(str)) {
			const { chr, ord } = puzzle.utils
			let res = [...str].map(c => puzzle.convert(c, { from: 'braille', to: 'char' })).join('')
            res = puzzle.utils.numberStd(res)
            return res
		  }
		  return [...str].map(c => puzzle.convert(c, { from: 'char', to: 'braille' })).join('')
		} else { // æ‹¼éŸ³
		  if (/[\u2800-\u28ff]/.test(str)) {
			let res = [...str].map(c => puzzle.convert(c, { from: 'braille', to: 'pinyin' })).join('')
            res = puzzle.utils.numberStd(res)
			return puzzle.utils.pinyinStd(res)
		  } else {
			return puzzle.utils.tokenize(str, puzzle.data.braillePinyinEncode).map(c => puzzle.convert(c, { from: 'pinyin', to: 'braille'})).join('')
		  }
		}
      }
      module.exports = braille
      </script>
      </div>
    </div>
    <div id="tabs-hogpen" class="tabs-body-item">
      <table id="table-hogpen" class="col2">
      </table>

      [å‚è€ƒ <a href="https://blog.csdn.net/weixin_47869330/article/details/111396033" target="_blank">CSDN</a>]
      <div id="hogpen-playground" class="playground" type="textarea" value="hogpen">
      <script type="text">
      module.exports = function hogpen (str) {
        return str
      }
      </script>
      </div>
    </div>
    <div id="tabs-caesar" class="tabs-body-item">
      <div class="playground" type="textarea" value="Sleep">

      <p>è¯´æ˜: å¯¹æ‰€æœ‰è‹±æ–‡å­—æ¯è¿›è¡Œç›¸åŒçš„å¹³ç§». æ¯”å¦‚ A â†’ C, B â†’ D, ..., Y â†’ A, Z â†’ B.</p>
      <script type="text">
      module.exports = function caesar (str) {
        const { chr, ord } = puzzle.utils
        return Array.from({ length: 25 }).map((_, i) => {
          return String(i + 1).padStart(2, '0') + '. ' + [...str].map(c => {
            if (/[a-z]/.test(c)) return chr((ord(c) - 96 + i) % 26 + 97)
            if (/[A-Z]/.test(c)) return chr((ord(c) - 64 + i) % 26 + 65)
            return c
          }).join('')
        }).join('\n')
      }
      </script>
      </div>
    </div>
    <div id="tabs-fence" class="tabs-body-item">
      <div class="playground" type="textarea" value="tlrreelcntoattwsheee">
      <p>è¯´æ˜: æŠŠæ–‡å­—å†™æˆçŸ©é˜µ, ç„¶åå¯¹çŸ©é˜µè¿›è¡Œè½¬ç½®. å˜æ¢çš„ç»“æœå–å†³äºçŸ©é˜µçš„å®½åº¦.</p>
      <div class="align-center">
        <span>å®½åº¦:</span>
        <input class="input" type="number" value="4" min="1" />
      </div>
      <script type="text">
      const $input = container.querySelector('.input')
      const $run = container.querySelector('input[type=button]')
      $input.oninput = e => {
        $run.click()
      }
      module.exports = function fence (str) {
        const arr = [...str]
        const buf = []
        const width = $input.value
        const lines = arr.length / width
        for (let j = 0; j < width; ++j) {
           for (let i = 0; i < lines; ++i) {
              const c = arr[i * width + j]
              if (c) buf.push(c)
           }
           buf.push('\n')
        }
        return buf.join('')
      }
      </script>
      </div>
    </div>
    <div id="tabs-reverse" class="tabs-body-item">
      <div class="playground" type="textarea" value="Able was I ere I saw Elba">
      <p>è¯´æ˜: åè½¬æ–‡æœ¬
      </p>
      <script type="text">
      module.exports = function reverse (str) {
        return [...str].reverse().join('')
      }
      </script>
      </div>
    </div>
    <div id="tabs-vigenere" class="tabs-body-item">
      <p>ç”¨ P è¡¨ç¤ºæ˜æ–‡ (plaintext), C è¡¨ç¤ºå¯†æ–‡ (cipher text), E è¡¨ç¤ºåŠ å¯† (encrypt), D è¡¨ç¤ºè§£å¯† (decrypt),
        K è¡¨ç¤ºå¯†é’¥ (key). ç»´å‰å°¼äºšå¯†ç æ˜¯ä¸€ç§å¯¹ç§°åŠ å¯†, å¯ä»¥è¡¨ç¤ºä¸º
        <span class="formula">
          `C = E(P, K)`,<br>
          `P = D(C, K)`.
        </span>
        å…¶ä¸­æ˜æ–‡ã€å¯†æ–‡ä¸å¯†é’¥éƒ½åªå« 26 ä¸ªè‹±æ–‡å­—æ¯, ä»¥ `A mapsto 0`, `Z mapsto 25` çš„æ–¹å¼å¯¹åº”åˆ°æ•°å­—.
        æˆ‘ä»¬å‡å®šå¯†é’¥ä¸æ˜æ–‡æ˜¯ä¸€æ ·é•¿çš„, å¦‚æœå¯†é’¥å¤ªçŸ­, åˆ™é€šè¿‡é‡å¤çš„æ–¹å¼ä½¿å®ƒä»¬ä¸€æ ·é•¿.
        ç»´å‰å°¼äºšçš„åŠ å¯†ã€è§£å¯†ç®—æ³•å®šä¹‰ä¸º:
        <span class="formula">
          `C_i = E(P_i, K_i) = (P_i + K_i) mod 26`,<br>
          `P_i = D(C_i, K_i) = (C_i - K_i) mod 26`.
        </span>
      </p>

      <div class="playground" type="textarea" value="vpxz giaxiv wpubtt mj pwi zitwzt">
      <div class="align-center">
        <span>å¯†é’¥:</span>
        <input id="input-vigenere" class="input" type="text" value="cipher"/>
        <label class="align-center">è§£å¯†
          <input id="decode-vigenere" name="radio-vigenere" type="radio" value="decode" checked />
        </label>
        <label class="align-center">åŠ å¯†
          <input id="encode-vigenere" name="radio-vigenere" type="radio" value="encode" />
        </label>
      </div>
      <script type="text">
      module.exports = function vigenere (plaintext) {
        const { chr, ord } = puzzle.utils
        const $input = $('#input-vigenere')
        const isDecode = $('#decode-vigenere').checked
        const key = [...$input.value.toLowerCase()].map(c => ord(c) - 97)
        let i = 0
        return [...plaintext.toLowerCase()].map(c => {
          const code = ord(c)
          if (code >= 97 && code <= 122) {
            let k = key[i]
            if (isDecode) k = -k
            i = (i + 1) % key.length
            return chr((code + 26 - 97 + k) % 26 + 97)
          } else {
            return c
          }
        }).join('')
      }
      </script>
      </div>
    </div>
    <div id="tabs-lens" class="tabs-body-item">
      <canvas id="lens-canvas"></canvas>
      <label>
        <input type="radio" name="lens-radio" value="0" checked> R
      </label>
      <label>
        <input type="radio" name="lens-radio" value="1"> G
      </label>
      <label>
        <input type="radio" name="lens-radio" value="2"> B
      </label>
      <input id="lens-file" type="file" accept="image/*" />
      <script type="module" defer>
      const canvas = $('#lens-canvas')
      const ctx = canvas.getContext('2d', { willReadFrequently: true })
      const image = {}
      const lens = { x: 0, y: 0, w: 550, h: 400 }
      const mouse = { x: 0, y: 0 }
      let channel = 0

      const updateLens = (x, y) => {
      }

      const init = (img) => {
        const dpr = window.devicePixelRatio
        const draggable = draggableCanvas({
          canvas,
          ctx,
          onMouseDown ({ x, y }) {
            mouse.x = x
            mouse.y = y
            lens.x0 = lens.x
            lens.y0 = lens.y
          },
          onMouseMove ({ x, y }) {
            lens.x = lens.x0 + (x - mouse.x) * dpr
            lens.y = lens.y0 + (y - mouse.y) * dpr
            update()
          },
        })

        const rect = canvas.getBoundingClientRect()
        const r1 = img.width / img.height
        const r2 = rect.width / rect.height
        let x, y, w, h
        if (r1 < r2) { // å›¾ç‰‡æ¯”è¾ƒç˜¦
          h = rect.height | 0
          w = h * r1 | 0
          y = 0
          x = (rect.width - w) / 2 | 0
        } else { // å›¾ç‰‡æ¯”è¾ƒèƒ–
          w = rect.width | 0
          h = w / r1 | 0
          x = 0
          y = (rect.height - h) / 2 | 0
        }
        Object.assign(image, { img, x, y, w, h })

        lens.w = w * dpr
        lens.h = h * dpr
        lens.x = (rect.width - w) / 2 * dpr | 0
        lens.y = (rect.height - h) / 2 * dpr | 0
        update()
      }

      const update = () => {
        ctx.drawImage(image.img, image.x, image.y, image.w, image.h)
        const imageData = ctx.getImageData(lens.x, lens.y, lens.w, lens.h)
        const { data } = imageData
        for (let i = 0; i < data.length; i += 4) {
          if (channel !== 0) data[i] = 0
          if (channel !== 1) data[i+1] = 0
          if (channel !== 2) data[i+2] = 0
        }
        ctx.putImageData(imageData, lens.x, lens.y)
      }

      document.querySelector('#lens-file').onchange = (e) => {
        const file = e.target.files[0]
        if (!file) return
        const reader = new FileReader()
        const img = new Image()
        reader.readAsDataURL(file)
        reader.onload = function () {
          img.src = this.result
        }
        img.onload = () => {
          init(img)
        }
      }

      ;[...document.querySelectorAll('input[name=lens-radio]')].forEach(radio => {
        radio.onchange = (e) => {
          channel = parseInt(e.target.value)
          update()
        }
      })
      </script>
    </div>
    <div id="tabs-paint-by-numbers" class="tabs-body-item">
      <p>å…ˆè¾“å…¥ n è¡Œ, æ¯è¡Œç¬¬ä¸€ä¸ªå­—ç¬¦åè·Ÿä¸€ä¸ªç©ºæ ¼, å†åé¢è·Ÿç€16è¿›åˆ¶è‰²å·.
        ç„¶åè¾“å…¥ä¸€ä¸ªç©ºè¡Œ, åé¢ m è¡Œæ˜¯ç”»å¸ƒå†…å®¹.
        å¦‚æœç”»å¸ƒä¸­çš„æŸä¸ªå­—ç¬¦æ‰¾ä¸åˆ°å¯¹åº”é¢œè‰², åˆ™å®ƒé»˜è®¤æ˜¯é€æ˜çš„.
      </p>
      <div class="playground" type="textarea" value="0 #ffffff
1 #000000

1001
0110
0110
1001
">
<script type="text">
module.exports = function (str) {
  const cellSize = 8
  const lines = str.split('\n')
  const index = lines.findIndex(row => !row)
  const palette = Object.fromEntries(lines.slice(0, index).map(row => row.split(' ')))
  const board = lines.slice(index+1).filter(Boolean).map(row => [...row])
  const canvas = $('#paint-by-numbers-canvas')
  const ctx = canvas.getContext('2d')
  const w = cellSize * board[0].length
  const h = cellSize * board.length
  canvas.width = w
  canvas.height = h
  canvas.style.width = w + 'px'
  canvas.style.height = h + 'px'
  ctx.clearRect(0, 0, w, h)
  board.forEach((row, y) => {
    row.forEach((c, x) => {
      const color = palette[c]
      if (color) {
        ctx.fillStyle = color
        ctx.fillRect(cellSize * x, cellSize * y, cellSize, cellSize)
      }
    })
  })
  return 'done'
}
</script>
      </div>
      <canvas id="paint-by-numbers-canvas"></canvas>
    </div>
    <div id="tabs-amino" class="tabs-body-item">
      <table id="table-amino">
        <caption>20 ç§æ°¨åŸºé…¸å¯†ç å­è¡¨</caption>
        <tr>
          <td rowspan="2" class="bd-b">ç¬¬ä¸€ä¸ªå­—æ¯</td>
          <td colspan="4">ç¬¬äºŒä¸ªå­—æ¯</td>
          <td rowspan="2" class="bd-b">ç¬¬ä¸‰ä¸ªå­—æ¯</td>
        </tr>
        <tr>
          <td class="bd-b">U</td>
          <td class="bd-b">C</td>
          <td class="bd-b">A</td>
          <td class="bd-b">G</td>
        </tr>
        <tr>
          <td>U</td>
          <td>è‹¯ä¸™æ°¨é…¸ F<br>è‹¯ä¸™æ°¨é…¸ F<br>äº®æ°¨é…¸ L<br>äº®æ°¨é…¸ L</td>
          <td>ä¸æ°¨é…¸ S<br>ä¸æ°¨é…¸ S<br>ä¸æ°¨é…¸ S<br>ä¸æ°¨é…¸ S</td>
          <td>é…ªæ°¨é…¸ Y<br>é…ªæ°¨é…¸ Y<br>ç»ˆæ­¢å¯†ç <br>ç»ˆæ­¢å¯†ç </td>
          <td>åŠèƒ±æ°¨é…¸ C<br>åŠèƒ±æ°¨é…¸ C<br>ç»ˆæ­¢å¯†ç <br>è‰²æ°¨é…¸ W</td>
          <td>U<br>C<br>A<br>G</td>
        </tr>
        <tr>
          <td>C</td>
          <td>äº®æ°¨é…¸ L<br>äº®æ°¨é…¸ L<br>äº®æ°¨é…¸ L<br>äº®æ°¨é…¸ L</td>
          <td>è„¯æ°¨é…¸ P<br>è„¯æ°¨é…¸ P<br>è„¯æ°¨é…¸ P<br>è„¯æ°¨é…¸ P</td>
          <td>ç»„æ°¨é…¸ H<br>ç»„æ°¨é…¸ H<br>è°·æ°¨é…°èƒº Q<br>è°·æ°¨é…°èƒº Q</td>
          <td>ç²¾æ°¨é…¸ R<br>ç²¾æ°¨é…¸ R<br>ç²¾æ°¨é…¸ R<br>ç²¾æ°¨é…¸ R</td>
          <td>U<br>C<br>A<br>G</td>
        </tr>
        <tr>
          <td>A</td>
          <td>å¼‚äº®æ°¨é…¸ I<br>å¼‚äº®æ°¨é…¸ I<br>å¼‚äº®æ°¨é…¸ I<br>ç”²ç¡«æ°¨é…¸ M</td>
          <td>è‹æ°¨é…¸ T<br>è‹æ°¨é…¸ T<br>è‹æ°¨é…¸ T<br>è‹æ°¨é…¸ T</td>
          <td>å¤©å†¬é…°èƒº N<br>å¤©å†¬é…°èƒº N<br>èµ–æ°¨é…¸ K<br>èµ–æ°¨é…¸ K</td>
          <td>ä¸æ°¨é…¸ S<br>ä¸æ°¨é…¸ S<br>ç²¾æ°¨é…¸ R<br>ç²¾æ°¨é…¸ R</td>
          <td>U<br>C<br>A<br>G</td>
        </tr>
        <tr>
          <td>G</td>
          <td>ç¼¬æ°¨é…¸ V<br>ç¼¬æ°¨é…¸ V<br>ç¼¬æ°¨é…¸ V<br>ç¼¬æ°¨é…¸ V</td>
          <td>ä¸™æ°¨é…¸ A<br>ä¸™æ°¨é…¸ A<br>ä¸™æ°¨é…¸ A<br>ä¸™æ°¨é…¸ A</td>
          <td>å¤©å†¬æ°¨é…¸ D<br>å¤©å†¬æ°¨é…¸ D<br>è°·æ°¨é…¸ E<br>è°·æ°¨é…¸ E</td>
          <td>ç”˜æ°¨é…¸ G<br>ç”˜æ°¨é…¸ G<br>ç”˜æ°¨é…¸ G<br>ç”˜æ°¨é…¸ G</td>
          <td>U<br>C<br>A<br>G</td>
        </tr>
      </table>
      <table id="table-amino-abbr">
      </table>

      <div class="playground" type="textarea" value="ACG CAU GAA AAA GAG UAU">
        <p>è¾“å…¥å¯†ç å­, è¾“å‡ºè‹±æ–‡å­—æ¯.
          æ³¨æ„: è‹±æ–‡å­—æ¯å¯¹åº”çš„å¯†ç å­å¹¶ä¸å”¯ä¸€.
          6 ä¸ªå­—æ¯ B, J, O, U, X, Z å¹¶æ²¡æœ‰å¯¹åº”çš„æ°¨åŸºé…¸.
        </p>
        <script type="text">
        const dict = 'FFLLSSSSYY..CC.WLLLLPPPPHHQQRRRRIIIMTTTTNNKKSSRRVVVVAAAADDEEGGGG'
        module.exports = function amino (str) {
          const { chunk } = puzzle.utils
          str = str.replace(/\s/g, '').toUpperCase().replace(/U/g, '0').replace(/C/g, '1').replace(/A/g, '2').replace(/G/g, '3')
          if (str.length % 3 !== 0) {
            throw new Error('å¯†ç å­çš„æ•°é‡å¿…é¡»æ˜¯ 3 çš„å€æ•°', str.length)
          }
          return chunk(str, 3).map(v => {
            const index = parseInt(v[0]) * 16 + parseInt(v[1]) * 4 + parseInt(v[2])
            return dict[index] || '?'
          }).join('')
        }
        </script>
      </div>
    </div>
  </div>
  <div class="tabs-footer">
    <a class="tabs-footer-item active" href="#tabs-a1z26">å­—æ¯åº a1z26</a>
    <a class="tabs-footer-item" href="#tabs-ascii">ascii</a>
    <a class="tabs-footer-item" href="#tabs-cantor">åº·æ‰˜ cantor</a>
    <a class="tabs-footer-item" href="#tabs-morse">æ‘©æ–¯ morse</a>
    <a class="tabs-footer-item" href="#tabs-nato">åŒ—çº¦å­—æ¯ nato</a>
    <a class="tabs-footer-item" href="#tabs-cellphone">æ‰‹æœºé”®ç›˜ cellphone</a>
    <a class="tabs-footer-item" href="#tabs-board">æ£‹ç›˜å¯†ç </a>
    <a class="tabs-footer-item" href="#tabs-flag">æ——è¯­ flag</a>
    <a class="tabs-footer-item" href="#tabs-signal-flag">æµ·æ—— signal flag</a>
    <a class="tabs-footer-item" href="#tabs-braille">ç›²æ–‡ braille</a>
    <a class="tabs-footer-item" href="#tabs-hogpen">çŒªåœˆ hogpen</a>
    <a class="tabs-footer-item" href="#tabs-caesar">å‡¯æ’’ caesar</a>
    <a class="tabs-footer-item" href="#tabs-fence">æ …æ  fence</a>
    <a class="tabs-footer-item" href="#tabs-reverse">å€’åº reverse</a>
    <a class="tabs-footer-item" href="#tabs-vigenere">ç»´å‰å°¼äºš VigenÃ¨re</a>
    <a class="tabs-footer-item" href="#tabs-lens">é€é•œ lens</a>
    <a class="tabs-footer-item" href="#tabs-paint-by-numbers">æ•°å­—æ²¹ç”»</a>
    <a class="tabs-footer-item" href="#tabs-amino">æ°¨åŸºé…¸å¯†ç å­ amino</a>

    <!-- å®ç”¨å·¥å…· -->

    <a class="tabs-footer-item" href="http://nutrimatic.org/" target="_blank" title="è§£å­—æ¯ä¹±åº anagram">nutrimaticğŸ”—</a>
    <a class="tabs-footer-item" href="http://quipqiup.com/" target="_blank" title="è§£å•è¡¨å¯†ç ">quipqiupğŸ”—</a>
    <a class="tabs-footer-item" href="https://www.guballa.de/vigenere-solver" target="_blank" title="æ— å¯†é’¥è§£ç»´å‰å°¼äºš">vigenere-solverğŸ”—</a>
    <a class="tabs-footer-item" href="https://scieph.com/tools" target="_blank" title="æ·±å›½äº¤è§£è°œä¼š">sciephğŸ”—</a>
	<a class="tabs-footer-item" href="http://cs.newdu.com/search.html" target="_blank" title="è°šè¯­ä¿—è¯­æ­‡åè¯­">ä¿—è¯­å¤§å…¨ğŸ”—</a>
	<a class="tabs-footer-item" href="https://uutool.cn/telegraph-code-decode/" target="_blank" title="ä¸­æ–‡ç”µç æŸ¥è¯¢">ä¸­æ–‡ç”µç ğŸ”—</a>
    <a class="tabs-footer-item" href="https://www.qianp.com/" target="_blank" title="åƒç¯‡å›½å­¦">åƒç¯‡å›½å­¦ğŸ”—</a>
    <a class="tabs-footer-item" href="https://www.hanyuguoxue.com/" target="_blank" title="æ±‰è¯­å›½å­¦">æ±‰è¯­å›½å­¦ğŸ”—</a>
	<a class="tabs-footer-item" href="https://www.moshangshici.com" target="_blank" title="é™Œä¸Šè¯—è¯">é™Œä¸Šè¯—è¯ğŸ”—</a>
	<a class="tabs-footer-item" href="https://sou-yun.cn/PoemIndex.aspx" target="_blank" title="è¯—è¯æœéŸµ">è¯—è¯æœéŸµğŸ”—</a>
	<a class="tabs-footer-item" href="https://symbl.cc" target="_blank" title="symbol.cc">unicodeğŸ”—</a>
    <a class="tabs-footer-item" href="http://szdm.00cha.net/" target="_blank" title="æœºåœºä»£ç æŸ¥è¯¢">æœºåœºä»£ç ğŸ”—</a>
    <a class="tabs-footer-item" href="https://www.guojiadaima.com/" target="_blank" title="å›½å®¶ä»£ç ">å›½å®¶ä»£ç ğŸ”—</a>
    <a class="tabs-footer-item" href="https://www.astro-init.top/index.php?title=%E6%98%9F%E5%BA%A7%E5%8F%8A%E4%BA%AE%E6%98%9F%E5%90%8D%E5%AF%B9%E7%85%A7%E8%A1%A8" target="_blank" title="æ˜Ÿåº§åŠäº®æ˜Ÿåå¯¹ç…§è¡¨">88æ˜Ÿåº§ğŸ”—</a>
    <a class="tabs-footer-item" href="https://xing.fmi.uni-jena.de/mediawiki/index.php/IAU-Catalog_of_Star_Names" target="_blank" title="IAU-Star Names, IAU-Constellations">å›½é™…æ˜ŸåğŸ”—</a>
    <a class="tabs-footer-item" href="https://www.zgbk.com/ecph/words?SiteID=1&ID=225325&Type=bkzyb&SubID=140853" target="_blank" title="ä¸­å›½æ˜Ÿå">ä¸­å›½æ˜ŸåğŸ”—</a>
    <a class="tabs-footer-item" href="https://docs.qq.com/sheet/DTnNQb2ZOa0RsdGpI?tab=c8c5xi" target="_blank" title="puzzle hunt æ–°äººå¯¼èˆª">æ–°äººå¯¼ huntğŸ”—</a>
    <a class="tabs-footer-item" href="https://origamisimulator.org/" target="_blank" title="æŠ˜çº¸æ¨¡æ‹Ÿå™¨">æŠ˜çº¸æ¨¡æ‹Ÿå™¨ğŸ”—</a>
  </div>
</div>

<script src="../../js/note.js"></script>
<script src="../../js/playground.js"></script>
<script src="../../js/puzzle/classic.js"></script>
<script src="../../js/drag-canvas.js"></script>
<script>
function $ (...args) {
  return document.querySelector(...args)
}

const init = () => {
  const { ord, chunk } = puzzle.utils
  const config = [
	{
	  el: $('#table-a1z26'),
	  filter: v => /[A-Z]/.test(v),
	  map: v => puzzle.convert(v, { from: 'char', to: 'number' }),
	  title: 'å­—æ¯åº',
	},
    {
      el: $('#table-ascii'),
      map: ord,
      title: 'ascii',
    },
	{
	  el: $('#table-braille'),
	  map: v => puzzle.convert(v, { from: 'char', to: 'braille' }),
	  title: 'ç›²æ–‡',
	},
    {
      el: $('#table-braille-pinyin'),
      title: 'ç›²æ–‡æ‹¼éŸ³',
      rows: chunk(puzzle.data.braillePinyinArr, 8).map(row => row.flat()),
    },
	{
	  el: $('#table-morse'),
	  map: v => puzzle.convert(v, { from: 'char', to: 'morse' }),
	  title: 'æ‘©æ–¯',
	},
	{
	  el: $('#table-nato'),
	  filter: v => /[A-Z]/.test(v),
	  map: v => puzzle.data.natoArr[ord(v)-65],
	  title: 'åŒ—çº¦å­—æ¯',
	},
	{
	  el: $('#table-flag'),
	  filter: v => /[A-Z]/.test(v),
	  map: v => puzzle.convert(v, { from: 'char', to: 'flag' }),
	  title: 'æ——è¯­',
	},
	{
	  el: $('#table-cantor'),
	  filter: v => /[A-X]/.test(v),
	  map: v => puzzle.convert(v, { from: 'char', to: 'cantor' }),
	  title: 'Cantor',
	},
    {
      el: $('#table-amino-abbr'),
      title: 'æ°¨åŸºé…¸ç¼©å†™å¯¹ç…§',
      header: [
        'ä¸­æ–‡',
        'è‹±æ–‡',
        'ä¸‰å­—æ¯ç¼©å†™',
        'å•å­—æ¯ç¼©å†™',
      ],
      rows: chunk([
        'ç”˜æ°¨é…¸', 'Glycine', 'Gly', 'G',
        'ä¸™æ°¨é…¸', 'Alanine', 'Ala', 'A',
        'ç¼¬æ°¨é…¸', 'Valine', 'Val', 'V',
        'äº®æ°¨é…¸', 'Leucine', 'Leu', 'L',
        'å¼‚äº®æ°¨é…¸', 'Isoleucine', 'Ile', 'I',
        'è„¯æ°¨é…¸', 'Proline', 'Pro', 'P',
        'è‹¯ä¸™æ°¨é…¸', 'Phenylalanine', 'Phe', 'F',
        'é…ªæ°¨é…¸', 'Tyrosine', 'Tyr', 'Y',
        'è‰²æ°¨é…¸', 'Tryptophan', 'Trp', 'W',
        'ä¸æ°¨é…¸', 'Serine', 'Ser', 'S',
        'è‹æ°¨é…¸', 'Threonine', 'Thr', 'T',
        'åŠèƒ±æ°¨é…¸', 'Cystine', 'Cys', 'C',
        'è›‹æ°¨é…¸', 'Methionine', 'Met', 'M',
        'å¤©å†¬é…°èƒº', 'Asparagine', 'Asn', 'N',
        'è°·æ°¨é…°èƒº', 'Glutarnine', 'Gln', 'Q',
        'å¤©å†¬æ°¨é…¸', 'Asparticacid', 'Asp', 'D',
        'è°·æ°¨é…¸', 'Glutamicacid', 'Glu', 'E',
        'èµ–æ°¨é…¸', 'Lysine', 'Lys', 'K',
        'ç²¾æ°¨é…¸', 'Arginine', 'Arg', 'R',
        'ç»„æ°¨é…¸', 'Histidine', 'His', 'H',
      ], 4),
    },
    {
      el: $('#table-hogpen'),
      title: 'çŒªåœˆå¯†ç ',
      rows: chunk([
        'A', 'B', 'C', 'J', 'K', 'L',
        'D', 'E', 'F', 'M', 'N', 'O',
        'G', 'H', 'I', 'P', 'Q', 'R',
        ' ', 'S', ' ', ' ', 'W', ' ',
        'T', ' ', 'U', 'X', ' ', 'Y',
        ' ', 'V', ' ', ' ', 'Z', ' ',
      ], 6),
      map: v => v,
    },
  ]
  config.forEach(v => puzzle.renderTable(v))
}

init()
</script>
</body>
</html>
