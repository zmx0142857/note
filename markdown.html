<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Markdown</title>
  <link href="css/sleepy.css" rel="stylesheet">
</head>
<body>
<main id="main">
</main>
<script src="js/markdown-it.min.js"></script>
<script src="js/markdown-it-toc.js"></script>
<script>
const main = async (src) => {
  let text = await fetch(src).then(res => res.text())
  const md = markdownit({
    html: true, // enable html in markdown
    linkify: true, // convert url to <a>
  })
  .use(markdownitToc)
  text = text.replace(/^(#.*\n)?/, ($1) => $1 + '@[toc](目录)\n')
  document.querySelector('#main').innerHTML = md.render(text)
}

main(window.location.href.split('#')[1])
</script>
</body>
</html>
