<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <title>家庭理财</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="../../css/note.css" />
</head>
<body>

<p class="example">
  <b>单利与复利</b>
  单利是指本金不变, 简单地按比例计算每年产生的利息.
  复利则把每年的利息加入到本金中, 使本金以滚雪球的气势增加.
  例如, 设初始本金 `x` 元, 年利率为 `r`, 以单利和复利计算, `n` 年后的总资产分别为
  <span class="formula">
    单利: `x * (1 + n r)`,<br>
    复利: `x * (1 + r)^n`.
  </span>
  Bernoulli 不等式告诉我们, 当 `r ge -1` 时,
  <span class="formula">
    `(1 + r)^n ge 1 + n r`,
  </span>
  因而复利的回报比单利更丰厚.
</p>

<ol class="example">
  <b>收益与亏损</b>
  [群友@Rei]
  考虑更一般的情形, 每年的收益率是浮动而不是固定不变的.
  我们导出推广的 Bernoulli 不等式:
  <br>
  设 `r_1, cdots, r_n` 均 `ge -1` 且同号, 则成立
  <span class="formula">
    `prod_(i=1)^n (1 + r_i) ge 1 + sum_(i=1)^n r_i`.
  </span>
  注意上式成立的前提是各 `r_i` 同号, 即上式只适用于连盈或连亏的情形.
  <br>
  [群友@火雨] 几个例子:
  <li>先亏 10%, 再亏 10%, 还有 81%, 比直接亏 20% 更划算;</li>
  <li>先赚 10%, 再赚 10%, 赚了 21%, 比直接赚 20% 更划算;</li>
  <li>先亏 10%, 再赚 10%, 只剩 99%, 相当于亏了 1%;</li>
  <li>先赚 10%, 再亏 10%, 由于乘法交换律, 结果也是亏了 1%.</li>
</ol>

<p class="example">
  <b>年化收益率</b>
  假设余额宝中有 `x` 元, 当天收益 `y` 元, 容易算出日利率 `r = y//x`.<br>
  年化收益率是将余额宝一年的收益等价换算为银行一年期存款, 应当以复利计算, 即
  <span class="formula">
    `(1 + r)^365 - 1`.
  </span>
  例如, 日利率为 `r = 0.005%` (十万分之五) 时, 年化收益率为
  `(1 + r)^365 - 1 ~~ 1.84%`.
</p>

<p class="example">
  <b>何时本金翻倍</b>
  设一款产品的收益率为 `a%`, 则大约 `72//a` 年后本金翻倍.
</p>

<p class="proof">
  准确地说, 是 `y = ln 2//ln(1+a%)` 年后本金翻倍.
  使用 Padé 近似 `ln(1+x) ~~ 2x//(2+x)` 以及 `ln 2 ~~ 0.693`, 得到
  <span class="formula">
    `y ~~ 0.693 * (2 + a%)/(2a%)`
    `= 0.693 * (100+a//2)//a`
  </span>
  当取 `a ~~ 4` 时, `y ~~ 72//a`.
</p>

<ol class="example">
  <b>利率不等式</b>
  假设银行一年期利率是 `r_1`, 两年期利率是 `r_2`, 本金是 1 万元.
  <li>如果直接存两年期, 到期后有 `1 + 2r_2` 万元.</li>
  <li>如果先存一年期, 到期后假设利率不变, 将本息同时转存一年, 两年后有 `(1+r_1)^2 = 1+(2+r_1)r_1` 万元.</li>
  根据经验, 方案 2 的收益应低于方案 1, 即
  <span class="formula">
    `(2+r_1)r_1//2 lt r_2`.
  </span>
  这个不等式告诉我们, 两个一年期的复利应低于两年期单利.
  <br>
  用实际数字验证: 假设一年期利率是 `r_1 = 1.95%`, 那么两年期利率应大于 `(2+r_1)r_1//2 ~~ 1.969%`.
  现实生活中, 当一年期利率是 1.95% 时, 两年期利率会比 1.969% 这个结果大很多, 一般在 2% 以上.
</ol>

<p class="example">
  <b>内部收益率 IRR (Internal Rate of Return)</b>
  假设一个投资计划从第 0 年开始, 第 `n` 年结束, 其中第 `k` 年的收益或支出是 `P_k` 元.
  我们约定收益的符号为正 (`P_k gt 0`),
  支出的符号为负 (`P_k lt 0`). 这个 `P_k` 就称为第 `k` 年的<b>现金流</b>.
  现在已知每年的现金流, 则 IRR 定义为一个实数, 满足下面方程:
  <span class="formula">
    `sum_(k=0)^n P_k/(1+"IRR")^k = 0`.
  </span>
  假设第 0 年投入本金 1 万元, 第 `n` 年收回本金及收益共 `p` 万元,
  中间每年既没有支出也没有收入.
  于是 `P_0 = -1`, `P_n = p`, 列出方程
  <span class="formula">
    `p/(1+"IRR")^n = 1`,
  </span>
  即 `p = (1+"IRR")^n`. 在本题的简单条件下, IRR 的作用相当于复利.
  至于更复杂的情形, 可以用 Excel 的 IRR 函数完成计算.
</p>

<div class="p example">
  <b>个税计算</b>
  简单来说, 每年应纳税额 `y` 是这一年的应纳税所得额 `x` 的分段函数 (基于 2025 年税率):
  <span class="formula">
    `y = {
      3% xx x, if x le 3.6 "万";
      10% xx x - 2520, if 3.6 "万" lt x le 14.4 "万";
      20% xx x - 16920, if 14.4 "万" lt x le 30 "万";
      25% xx x - 31920, if 30 "万" lt x le 42 "万";
      30% xx x - 52920, if 42 "万" lt x le 66 "万";
      35% xx x - 85920, if 66 "万" lt x le 96 "万";
      45% xx x - 181920, if x gt 96 "万"
    :}`
  </span>
  <canvas id="img-tax-rate" width="400" height="300"></canvas>
  其中应纳税所得额是由年收入进行各种扣除后得到的:
  <span class="formula">
    `x = max(0, "税前年收入" - "五险一金个人缴纳部分" - "专项附加扣除" - "当年在职月数" xx 5000)`.
  </span>
  注意上式的系数 5000, 这意味着月收入在 5000 元以下是免税的, 这称为<b>个税起征点</b>.
</div>

<ol class="example">
  <b>医保知识</b>
  <li>医保卡等于社保卡，全称社会保障卡。</li>
  <li>医保卡中的资金，由医保基金统一管理，不能直接充值。</li>
  <li>医保分为两种：企业职工医保和城乡居民医保。
  </li>
  <li>门诊预交金：看病前在医院预先缴纳的一笔钱。随着医保体系完善，2025 年起不再收取预交金，同年全部退还余额。
  </li>
</ol>

<ul class="example">
  <b>增额型保险: 名词解释</b>
  <li><b>保费</b> 客户向保险公司支付或缴纳的购买保险的费用。</li>
  <li><b>保险金</b> 根据合同约定，保险公司向客户支付或赔偿的钱。</li>
  <li><b>保单年度</b> 从保单生效的那一天起，过了 N 年就是第 N 个保单年度末。
    特别地，第 0 个保单年度末指的就是保单生效的那一天。
  </li>
  <li><b>基本保险金额</b> 是一个计量单位，不是直接可以拿到的钱。
    它通常为固定值，不随保单年度增加而改变。
    例如，某保险产品的基本保险金额是 10000 元/份。
    合同中约定，发生某某事故时，赔偿的保险金 = 基本保险金额 &times; 1.5 等等。
    一般来说，基本保险金额 &leq; 保费。
  </li>
  <li><b>有效保险金额</b> 是某个时间点每份保险的理论价值，不是直接可以拿到的钱。
    有效保险金额通常随保单年度的增加呈复利增长。
  </li>
  <li><b>现金价值</b> 是某个时间点退保时，真正可以拿到的钱。这也是客户最关心的部分。
    通常在第 0 个保单年度末，现金价值为 0。
    在整个前期，现金价值都远低于有效保险金额（理论值），直到后期，这两个值才会逐渐接近。
    当现金价值大于每份的保费时，这份保险才真正回本。
    一般来说，回本会发生在所有保费缴纳完毕的若干年以后。
  </li>
</ul>

<script src="../../js/note.js?type=math"></script>
<script src="../../js/plot.js"></script>
<script>
const tax = x => x <= 3.6 ? x * 0.03
  : x <= 14.4 ? x * 0.10 - 0.2520
  : x <= 30 ? x * 0.20 - 1.6920
  : x <= 42 ? x * 0.25 - 3.1920
  : x <= 66 ? x * 0.30 - 5.2920
  : x <= 96 ? x * 0.35 - 8.5920
  : x * 0.45 - 18.1920
new Plot('img-tax-rate', { step: 0.1  })
  .geometry({xmin: 0, xmax: 155, ymin: -1, ymax: 44}).axis({
    xlabel: 'x (万元)', ylabel: 'y (万元)', xtick: 20, ytick: 5
  })
  .plot(tax, {min:0})
</script>
</body>
</html>
