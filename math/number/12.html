<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8" />
  <title>理想的分解</title>
  <link rel="stylesheet" href="../../css/note.css"/>
</head>

<body>

<h2>理想的基本概念</h2>

<ol class="definition">
  <b>理想</b> 称环 `R` 的子集 `A` 为理想, 如果它满足
  <li>是 `R` 的加法子群: `AA a, b in A`, `a +- b in A`;</li>
  <li>吸收性质: `A R sube A`, 亦即 `AA a in A`, `AA r in R`, `a r in A`.</li>
  因此, 理想是一个子环, 且若 `a in A`, 则 `a` 的任意倍数都属于 `A`.
</ol>

<p class="remark">
  以下, 我们总假定 `R` 为<b>交换幺环</b>, 且我们提到的理想默认都是<b>非零</b>的.
  很“理想”的假定!
</p>

<ol class="definition">
  <b>理想的运算</b> 设 `R` 为交换幺环, `A, B` 是 `R` 的理想,
  <li>`A nn B` 是同时含于 `A, B` 的最大理想;</li>
  <li>`A + B := {a + b | a in A, b in B}` 是同时包含 `A, B` 的最小理想;</li>
  <li>`A B := { sum_i a_i b_i (有限和) | a_i in A, b_i in B }` 也是 `R`
    的理想.</li>
  以上三种运算均满足交换律, 它们都能推广到有限个理想的情形.<br>
</ol>

<p class="proposition">
  `A, B` 是环 `R` 的理想, 则 `A B sube A nn B sube A + B`.
</p>

<ol class="proof">
  <li>`A nn B sube A sube A + B`;</li>
  <li>由理想的吸收性质, `A B sube A R sube A`, 类似有 `A B sube B`,
    因此 `A B sube A nn B`.<br>
    从元素的角度, 任取 `a in A`, `b in B`
    有 `a b in A nn B` 进而 `A B sube A nn B`.
  </li>
</ol>

<h3>理想的互素</h3>

<p class="definition">
  若 `R` 的理想之和 `A_1 + cdots + A_n = R`, 则称它们<b>互素</b>.
  从元素的角度, 理想互素当且仅当存在 `a_1 in A_1, cdots, a_n in A_n` 使
  `a_1 + cdots + a_n = 1`.
</p>

<p class="example">
  取 `R = ZZ`, `A = 2 ZZ`, `B = 3 ZZ` 为例, 有
  `A B = A nn B = 6 ZZ`, `A + B = ZZ`, 因此它们互素.
</p>

<ol class="remark">
  <li>这里 `A B = A nn B` 是巧合吗?</li>
  <li>`ZZ` 的理想都形如 `n ZZ` 吗, 这样的理想有什么优良性质 (主理想)?</li>
  <li>`2, 3` 是素数; 能不能在理想中定义类似概念 (素理想)?</li>
</ol>

<ol class="proposition">
  <li>`A, B` 是环 `R` 中互素的理想, 则 `A B = A nn B`;</li>
  <li>若理想 `A, B` 互素, `A, C` 也互素, 则 `A` 与 `B C` 互素;</li>
  <li>归纳知, 若 `A_1, cdots, A_n` 两两互素, 则
    `A_1 cdots A_n = A_1 nn cdots nn A_n`.
  </li>
</ol>

<ol class="proof">
  <li>只需证 `A B supe A nn B`.
    由于 `A, B` 互素, 可设 `1 = a + b`,
    任取 `s in A nn B`, 则 `s = (a + b) s = a s + s b` (有限和).
    故 `s in A B`.
  </li>
  <li>证明的启发来自初等数论. 设 `a_1 + b = 1`, `a_2 + c = 1`,
    相乘得 `(a_1 a_2 + a_1 c + a_2 b) + (b c) = 1`, 因此 `A` 与 `B C`
    互素.
  </li>
</ol>

<p class="theorem">
  <b>中国剩余定理</b>
  设环 `R` 的理想 `A_1, cdots, A_n` 两两互素, 则有商环间的同构
  <span class="formula">
    `f: R // nnn A_i to R//A_1 o+ cdots o+ R//A_n`,<br>
    `a + nnn A_i mapsto (a + A_1, cdots, a + A_n)`.
  </span>
</p>

<ol class="example">
  <li>`ZZ` 的每个理想形如 `n ZZ`, `n` 为非负整数;</li>
  <li>`m ZZ supe n ZZ iff m | n`.</li>
  <li>
    <span class="formula">
      `(m ZZ) (n ZZ) = (m n) ZZ` (理想的积 `darr` 数的乘积);<br>
      `m ZZ + n ZZ = (m, n) ZZ` (理想的和 `darr` 最大公因数).
      `m ZZ nn n ZZ = [m, n] ZZ` (理想的交 `darr` 最小公倍数);<br>
    </span>
    于是理想 `m ZZ`, `n ZZ` 互素当且仅当整数 `m, n` 互素.
  </li>
</ol>

<ol class="proof">
  <li>设 `A` 是 `ZZ` 的理想, 取非零元素
  `a in A`, 则 `-a in A`. 这指出 `A` 中存在正整数.
  设 `n` 是 `A` 中最小正整数, 由吸收性质知道 `n ZZ sube A`.
  另一方面, 任取 `b = n q + r in A`, `q in ZZ`, `0 le r lt n`;
  由 `n q in A` 知 `r in A`. 这迫使 `r = 0`, 否则与 `n` 的最小性矛盾.
  于是 `b in n ZZ`. 综上 `A = n ZZ`.</li>
</ol>

<h3>素理想与极大理想</h3>

<ol class="definition">
  设 `A` 是环 `R` 的理想, `A != R`, `A != {0}`.
  <li>若不存在理想 `B` 满足 `A sub B sub R`, 则称 `A` 为<b>极大理想</b>;</li>
  <li>若 `AA a, b in R`, `a b in A rArr a in A or b in A`, 则称 `A` 为<b>素理想</b>.</li>
</ol>

<ol class="example">
  考虑 `ZZ` 的理想 `n ZZ`.
  <li>若它为极大理想, 即不存在 `ZZ sup m ZZ sup n ZZ`, 亦即不存在
    `1 lt m lt n` 使得 `m | n`, 亦即 `n` 为素数.</li>
  <li>若它为素理想, 即 `AA a, b in ZZ`, `n | a b rArr n | a or n | b`,
    亦即 `n` 为素数.
  </li>
  综上 `ZZ` 的素理想和极大理想都形如 `p ZZ`, `p` 为素数.
</ol>

<p class="proposition">
  <b>素理想的等价条件</b>
  环 `R` 的理想 `P` 为素理想当且仅当对 `R` 的任意理想 `A`, `B` 都有
  <span class="formula">
    `A B sube P rArr A sube P or B sube P`.
  </span>
</p>

<p class="proposition">
  设 `A, B` 为环 `R` 的理想, 若 `P = A nn B` 为素理想,
  则 `P = A` 或 `P = B`. 此结论可推广到有限个理想.
</p>

<ol class="proposition">
  <b>用商环判定素理想/极大理想</b>
  设 `A` 是环 `R` 的理想,
  <li>`A` 是素理想 `iff R//A` 是整环 (Domain);</li>
  <li>`A` 是极大理想 `iff R//A` 是域.</li>
</ol>

<p class="corollary">
  极大理想都是素理想. 特别地, 由于<a href="../abstract/6.html#cor-finite-has-inv">有限整环是域</a>, 所以 `R` 有限时, 它的每个素理想都是极大理想.
</p>

<h3>主理想整环 PID</h3>

<ol class="definition">
  <b>有限生成理想与主理想</b>
  设 `a_1, cdots, a_n in R`, 则
  <span class="formula">
    `(a_1, cdots, a_n) = a_1 R + cdots + a_n R`
  </span>
  是 `R` 的理想, 称为 `a_1, cdots, a_n` (有限个元素) 生成的理想.
  特别, 由一个元素生成的理想 `(a) = a R` 称为 `R` 的<b>主理想</b>.
  <li>每个理想均为有限生成的环称为 Noether 环;</li>
  <li>每个理想均为主理想的环称为主理想环;</li>
  若 `R` 是整环, 又是主理想环,
  则称它为<b>主理想整环 (Principal Ideal Domain, PID).</b>
</ol>

<ol class="example">
  <li>前面已经用带余除法证明 `ZZ` 是 PID;
    `ZZ` 的理想形如 `(n) = n ZZ`, `n` 是非负整数.</li>
  <li>类似可证, 域 `bbb F` 上的多项式环 `bbb F[x]` 是 PID.
    `bbb F[x]` 的理想形如 `(f(x)) = f(x) bbb F[x]`, `f(x)` 是首一多项式.
  </li>
  <li>幂级数环 `bbb F[[x]]` 是 PID.</li>
</ol>

<ol class="property">
  <b>主理想的性质</b>
  设 `a, b in R`, 有
  <li>`(a) sube (b) iff b | a`;</li>
  进一步设 `R` 为整环, 有
  <li>`(a) = (b) iff a ~ b`;</li>
  <li>`(a) = R iff a in R^xx`;</li>
</ol>

<ol class="proof">
  <li>`(a) sube (b)` `iff a in (b)` `iff b | a`.</li>
  <li>结论对零理想显然成立, 下设 `a, b != 0`.
    由 1 知 `a | b` 且 `b | a`.
    记 `b = epsi a`, `a = eta b`, 则
    `b = epsi eta b`. 又 `R` 为整环, 约去 `b` 得
    `epsi eta = 1`, 即 `epsi`, `eta` 互逆, 因此 `a ~ b`.
  </li>
  <li>`(a) = R` `iff 1 in (a)` `iff (a) = (1)` `iff a ~ 1` `iff a in R^xx`.</li>
</ol>

<p class="definition">
  <b>PID 上的最大公约数</b>: 任取 `a, b in R-{0}`, 则存在 `d in RR-{0}`
  使 `(d) = (a) + (b)`.  至多相差一个单位, 这样的 `d` 称为 `a, b`
  的最大公约数, `d = gcd(a, b)`.  由理想的定义, `R` 上成立裴蜀等式:
  存在 `x, y in R` 使
  <span class="formula">
    `a x + b y = d`.
  </span>
</p>

<p class="proposition">
  PID 中素理想都是极大理想.
</p>

<ol class="proof">
  设 `R` 为 PID, `(p)` 是它的素理想.
  <li>
    先证 `p` 是素元.
    若 `p = a b`, `a, b in R`, 则 `a b in (p)`. 由 `(p)` 为素理想知道 `a in
    (p) or b in (p)`.
    另一方面由 `p = a b` 有 `p in (a), p in (b)`, 综上有 `(a) = (p) or (b)
    = (p)`, 即 `a ~ p or b ~ p`. 故 `p` 是素元.
  </li>
  <li>再证 `(p)` 极大.
    若存在理想 `(q)` 使得 `(p) sube (q) sube R`, 则 `q | p`;
    但 `p` 为素元, 只能 `q ~ p` 或 `q in R^xx`;
    前者推出 `(q) = (p)`, 后者推出 `(q) = R`. 故 `(p)` 是极大理想.
  </li>
</ol>

<ol class="proposition">
  <li>PID `rArr` UFD;</li>
  <li>`R` 是 PID `rArr R[x]` 是 UFD.</li>
</ol>

<p class="example">
  `ZZ[x]`, `bbb F[x, y]` 是 UFD, 但均不是 PID.
  一般地, 域上的多元多项式环是 UFD 而非 PID.
</p>

<ol class="proof">
  事实上由于 `ZZ`, `bbb F[x]` 是 PID 知道 `ZZ[x]`, `bbb F[x, y]` 是 UFD.
  <li>
    `ZZ[x]` 不是 PID: `(2, x)` 不是主理想.
  </li>
  <li>
    `bbb F[x, y]` 不是 PID: `(x, y)` 不是主理想.
  </li>
</ol>

<ol class="example">
  在虚二次域 `QQ(sqrt d)` 的整数环当中, 是 UFD 的只有
  <span class="formula">
    `d = -1, -2, -3, -7, -11,`
    `-19, -43, -67, -163`.
  </span>
  上述数字模 4 的结果为 3, 2, 1, 1, 1, 1, 1, 1, 1.
  <li>
    `d -= 2, 3 (mod 4)` 时, `QQ(sqrt d)` 的整数环为 `ZZ[sqrt d]`, 它是 PID;
  </li>
  <li>
    而 `d -= 1 (mod 4)` 时它的整数环并不是 `ZZ[sqrt d]`, 而是更大的环`ZZ[(1+sqrt d)/2]`,
    这时 `ZZ[sqrt d]` 不是整闭整环, 因而不是 UFD.
  </li>
  这再次印证上一章的结论: `d lt 0` 时, `ZZ[sqrt d]` 当中只有 `ZZ[sqrt(-1)]`, `ZZ[sqrt(-2)]` 是 UFD.
</ol>

<h2>Dedekind 整环</h2>

<h3>理想的唯一因子分解定理</h3>

<p>代数数论的一个重要问题是: 数域 `K` 的整数环 `O_K` 是否为 UFD?
  很遗憾, 在二次域和分圆域中都存在不是 UFD 的例子.
  为此 Kummer 提出 "理想数", 在 `ZZ[zeta_p]` 中,
  他的理想数有唯一因子分解的性质.
  后来 Dedekind 为 "理想数" 找到了更合适的定义, 即为环的<b>理想</b>.
  本节的主要结果是下述定理:
</p>

<p class="box">
  <b>理想的唯一因子分解定理</b>
  数域 `K` 的整数环 `O_K` 中每个理想都可以分解为有限个素理想的乘积,
  且不计素因子的次序, 该分解是唯一的.
</p>

<p>这一结论将分成多个定理来证明. 我们从 Dedekind 整环开始.</p>

<ol class="definition">
  满足下列性质的整环 `D` 称为 <b>Dedekind 整环</b>:
  <li>`D` 为 Noether 整环, 即它的每个理想都是有限生成的: `A = a_1 D + cdots + a_n D`;</li>
  <li>`D` 是整闭的, 即若 `a` 是 `D` 的分式域中元素, 且 `a` 在 `D` 上整, 则 `a in D`;</li>
  <li>`D` 的素理想都是极大理想.</li>
</ol>

<ol class="property">
  设 `D` 是 Dedekind 整环, `A, B, C` 是它的理想, 有
  <li>`AA A`, `EE B` 使 `A B` 为主理想;</li>
  <li>(消去律) `A B = A C rArrB = C`;</li>
  <li>`A | B iff A supe B`; 这里 `A | B` 指 `EE C`, `B = A C`.</li>
</ol>

<ol class="proof">
  <li>
    如何充分利用 Dedekind 整环定义中的 3 个性质??
  </li>
  <li>若 `A B = A C`, 由 1. 知有理想 `I` 使 `A I = (a)`, `a != 0`.
    于是
    <span class="formula">
      `a B = A I B = A B I = A C I = A I C = a C`,
    </span>
    由 `a != 0` 和 `D` 是整环可知 `B = C`.
  </li>
  <li>`rArr`: 显然. `lArr`: 若 `A supe B`, 由 1. 有理想 `I` 使 `A I = (a)`, `a != 0`.
    由于 `B I sube A I = (a)`, `B I` 中的元素都是 `a` 的倍数,
    于是 `C = a^-1 B I` 是 `D` 中理想,
    且 `A C = a^-1 A I B = a^-1 a B = B`, 即 `A | B`.
  </li>
</ol>

<ol class="lemma">
  <b>Noether 环的等价条件</b> 设 `R` 是交换环, 以下三条等价:
  <li>`R` 是 Noether 环;</li>
  <li>(理想升链条件) 若 `R` 的一列理想满足 `A_1 sube A_2 sube cdots`,
    则存在 `n` 使得 `A_n = A_(n+1) = cdots`;
  </li>
  <li>(极大原则) `S` 是 `R` 中一些理想的非空集合, 则 `S` 中有极大元 A
    (不存在 `B in S` 使 `A sub B`).</li>
</ol>

<p class="theorem">
  整环 `D` 是 Dedekind
  整环当且仅当它的每个理想都可以分解为有限个素理想的乘积,
  且不计素因子的次序, 该分解是唯一的.
</p>

<ol class="proof">
  <li>分解的存在性. 令 `S` 是 `D` 中不能表成有限个素理想之乘积的理想 `I`
    的集合, `I != (0), D`. 反设 `S != O/`, 由 Noether 环的极大原则知 `S`
    有极大元 `M`; 设 `M` 含于极大理想 `P` 中. 现在 `P` 是素理想且 `P supe
    M`, 由 Dedekind 整环的性质 3. 知存在理想 `I` 使 `M = P I`, 从而 `M sube
    I`. 由 `P != D` 及 Dedekind 整环的消去律知 `M = P I != D I = I`, 于是
    `M sub I`. 但 `M` 是 `S` 中极大元, 因此 `I !in S`. 由 `S` 的定义,
    存在素理想 `P_1, cdots, P_n` 使
    <span class="formula">
      `I = P_1 cdots P_n`,
      `quad M = P I = P P_1 cdots P_n`,
    </span>
    与 `M in S` 矛盾. 因此 `S = O/`.
  </li>
  <li>分解的唯一性.
    设有两组素理想的乘积相等 `P_1 cdots P_r = Q_1 cdots Q_s`,
    则由 Dedekind 整环的性质 3, `P_1 sube Q_1 cdots Q_s`,
    `P_1` 必包含 `Q_1, cdots, Q_s` 中的一个.
    不妨设 `P_1 supe Q_1`, 由 Dedekind 整环的定义, `P_1`, `Q_1`
    均是极大理想, 所以 `P_1 = Q_1`. 然后由消去律得 `P_2 cdots P_r = Q_2
    cdots Q_s`. 依此进行下去, 得到 `r = s`, 且适当调整次序可使 `P_i = Q_i`,
    `i = 1, cdots, r`.
  </li>
  <li>下证若 `D` 满足唯一因子分解性质, 可推出 Dedekind 整环定义中的三个条件.
    ??
  </li>
</ol>

<p>
  因此, 要证 `O_K` 中理想的唯一因子分解定理, 只需验证 `O_K` 是 Dedekind
  整环.
</p>

<ol class="lemma">
  设 `O_K` 为数域 `K` 的整数环, `A` 为 `O_K` 的非零理想, `n = [K: QQ]`.
  <li>`A` 的加法群是有限生成的:
    <span class="formula">
      `A = a_1 ZZ o+ cdots o+ a_n ZZ`,
    </span>
    这里的 `a_1, cdots, a_n` 称为 `A` 的 `ZZ`-基.
    从而 `A` 作为理想也是有限生成的:
    <span class="formula">
      `A = a_1 O_K + cdots + a_n O_K`.
    </span>
  </li>
  <li>商环 `O_K//A` 是有限环.</li>
</ol>

<ol class="proof">
  <li>
    由于 `O_K` 的加群是有限生成的:
    <span class="formula">
      `O_K = omega_1 ZZ o+ cdots o+ omega_n ZZ`,
    </span>
    根据有限生成 Abel 群的理论, `O_K` 的任意理想 `A`
    的加法群也是有限生成的, 且 `A` 可表为直和.
  </li>
  <li>
    取 `0 != a in A`, 记 `m = N(a)`, 则 `m`
    为正整数. 注意到 `m//a` 是 `a` 的一些共轭元素之积, 从而是代数整数, 又
    `m//a in K`, 于是 `m//a in O_K`. 从而 `m = a * (m//a) in A`, 即 `m O_K
    sube A`. 现在有
    <span class="formula">
      `O_K/(m O_K)`
      `= (omega_1 ZZ o+ cdots o+ omega_n ZZ)/(m omega_1 ZZ o+ cdots o+ m omega_n ZZ)`
      `cong (omega_1 ZZ)/(m omega_1 ZZ) o+ cdots (omega_n ZZ)/(m omega_n ZZ)`
      `cong overset n overbrace(ZZ//m ZZ o+ cdots o+ ZZ//m ZZ)`.
    </span>
    由环的同态定理和 `m O_K sube A sube O_K` 可知
    <span class="formula">
      `O_K/A cong (O_K//m O_K)/(A//m O_K)`,
    </span>
    从而 `|O_K//A| le |O_K//m O_K| = m^n`, 即 `O_K//A` 是有限交换环.
  </li>
</ol>

<p class="theorem">
  任意数域的整数环 `O_K` 是 Dedekind 整环.
</p>

<ol class="proof">
  我们验证 `O_K` 满足 Dedekind 整环的全部三个条件.
  记 `{omega_1, cdots, omega_n}` 是 `O_K` 的一组整基, `n = [K: QQ]`.
  <li>`O_K` 是 Noether 环: 由引理的 1. 可知.
  </li>
  <li>`O_K` 是整闭的: 参见上一章.</li>
  <li>`O_K` 的素理想 `P` 是极大理想:
    由 `P` 为 `O_K` 的素理想可知 `O_K//P` 为整环, 又由引理知 `O_K//P`
    有限.  但熟知有限整环是域, 所以 `O_K//P` 是域, `P` 为 `O_K` 的极大理想.
  </li>
</ol>

<h3>Dedekind 整环与 PID</h3>

<p class="theorem">
  PID `rArr` Dedekind 整环.
</p>

<p class="proof">
  我们验证主理想整环 `D` 满足 Dedekind 整环的全部三个条件.
  1, 3 是显然的, 下证 2.
  设 `F` 是 `D` 的分式域, 取 `u = a//b in F`, 其中 `a, b in D`,
  `b != 0`. 不妨令 `a, b` 互素. 若 `u` 在 `D` 上整, 设
  <span class="formula">
    `u^n + c_(n-1) u^(n-1) + cdots + c_1 u + c_0 = 0`,
    `quad c_i in D`.
  </span>
  于是
  <span class="formula">
    `a^n + c_(n-1) a^(n-1) b + cdots c_0 b^n = 0`,
  </span>
  这推出 `b | a^n`. 又由 `a, b` 互素知 `b` 为单位 (主理想整环的性质).
  于是 `c = a//b in D`, `D` 是整闭的.
</p>

<p class="theorem">
  Dedekind 整环 `and` UFD `rArr` PID.
</p>

<h2>素理想分解</h2>

<p class="definition">
  <b>理想的范</b>
  设 `K` 为数域, `A` 是 `O_K` 的非零理想, 由前面的引理知道, `O_K//A` 是有限环,
  把元素个数 `|O_K//A|` 称为理想 `A` 的<b>范</b>, 记为 `N_K(A)`.
  数域 `K` 明确时省略下标.
</p>

<ol class="property">
  数域 `K` 中,
  <li>对任意两个理想有 `N(A B) = N(A) N(B)`.</li>
  <li>任取理想 `A` 的一组 `ZZ`-基 `a_1, cdots, a_n`, 则有
    <span class="formula">
      `d(a_1, cdots, a_n)`
      `= N(A)^2 d(K)`.
    </span>
  </li>
  <li>主理想的范等于生成元的范的绝对值, 即 `N((a)) = |N(a)|`.
    例如, 对于 `ZZ` 的理想 `n ZZ` 有 `N_QQ(n ZZ) = |n|`.
  </li>
  <li>设 `w_1, cdots, w_n` 为 `O_K` 的整基, `a_1, cdots, a_n` 是理想 `A` 的 `ZZ`-基, 且
    `(a_1, cdots, a_n)^(sf T) = M (w_1, cdots, w_n)^(sf T)`, 则 `N(A) = |det(M)|`.
  </li>
</ol>

<ol class="definition">
  <b>素理想分解</b>
  设 `L//K` 是数域的 `n` 次扩张, `P` 是 `O_K` 的素理想.
  我们的基本问题是: <b>扩充理想</b> `P O_L` 如何分解为素理想的乘积
  <span class="formula">
    `P O_L = prod_(i=1)^g P_i^(e_i)`,
    `quad e_i ge 1`.
  </span>
  规定一些术语:
  <li>`e_i = e(P_i//P)` 称为 `P_i` 的<b>分歧指数 (ramification index)</b>.</li>
  <li>域的扩张次数 `f_i = f(P_i//P) = [O_L//P_i : O_K//P]` 称为 `P_i` 的<b>剩余类域次数 (residue field degree)</b>.</li>
  <li>若存在 `e_i gt 1`, 则称 `P_i` 是 `O_L` 的分歧素理想, 并且称 `P` 在数域 `L` 中<b>分歧 (ramified)</b>.</li>
  <li>若 `g = 1`, `e_1 = n`, 此时 `P O_L = P_1^n`, 称 `P` 在 `L` 中<b>完全分歧</b>.</li>
  <li>若 `g = n`, 且所有 `e_i` 都等于 `1`, 此时 `P O_L` 是 `n` 个不同素理想的乘积, 称 `P` 在 `L` 中<b>完全分裂</b>.</li>
  <li>若 `g = 1`, `e_1 = 1`, 此时 `P O_L` 已经是 `O_L` 的素理想, 称 `P` 在 `L` 中<b>惰性</b>.</li>
</ol>

<p class="definition">
  设 `L//K` 是数域的 `n` 次扩张, `P` 是 `O_K` 的素理想, `Q` 是 `O_L` 的素理想.
  如果 `Q | P O_L`, 我们也说 `Q` 是 `P` 的素因子, 简记为 `Q | P`.
</p>

<ol class="property">
  设 `L//K` 是数域的 `n` 次扩张,
  <li>若 `P` 是 `O_K` 的素理想, 则 `P O_L` 是 `O_L` 中包含集合 `P` 的最小理想.</li>
  <li>若 `O_K` 的素理想 `P` 整除素数 `p`, 则 `O_K//P` 是特征为 `p` 的有限域.</li>
  <li>
    若 `Q` 是 `O_L` 的素理想,
    则 `Q nn O_K` 是 `O_K` 的素理想.
    同构意义下 `O_K // (Q nn O_K)` 是 `O_L // Q` 的子域, 它们均为有限域.</li>
  <li>若 `P, Q` 分别是 `O_K`, `O_L` 的素理想, 则
    `Q | P iff Q supe P iff P = Q nn O_K`.
  </li>
  <li>考虑 `P O_L` 在 `L` 中的素理想分解, `e_i, f_i` 定义同上, 则
    `sum_(i=1)^g e_i f_i = n`.
  </li>
</ol>

<ol class="proof">
  <li>显然它是理想: `P O_L O_L sube P O_L`.
    又设 `P'` 是 `O_L` 中包含 `P` 的理想,
    根据定义, 对任意 `p_i in P`, `l_i in O_L`, 有限和 `sum p_i l_i in P'`,
    所以 `P O_L sube P'`.
  </li>
  <li></li>
  <li>考虑环同态
    <span class="formula">
      `varphi: O_K to O_L//Q`,<br>
      `x mapsto x + Q`.
    </span>
    于是 `P := "ker" varphi = Q nn O_K` 是 `O_K` 的理想,
    根据环同态基本定理, `O_K // P` 同构于 `O_L // Q` 的子环.
    但 `O_L // Q` 为有限域 (代数整数环商掉素理想是有限域),
    从而 `O_K // P` 是有限整环, 必为域;
    这也指出 `P` 是 `O_K` 的素理想.
  </li>
  <li>这是因为一方面
    <span class="formula">
      `Q | P`
      `iff Q | P O_L`
      `iff Q supe P O_L`
      `iff Q supe P`.
    </span>
    另一方面, 若 `P = Q nn O_K` 显然 `Q supe P`; 反之若 `Q supe P`,
    则 `Q nn O_K supe P nn O_K = P`.
    但 `Q nn O_K` 和 `P` 均为 `O_K` 的极大理想, 所以它们相等.
  </li>
  <li>
    只证 `K = QQ` 的情形. 这时 `P` 为素数 `p` 生成的主理想.
    数域 `L` 是 `QQ` 的 `n` 次扩张.
    考虑理想的范 `N(P O_L) = N(p) = p^n`.
    另一方面 `N(P O_L)` `= N(prod P_i^(e_i))` `= prod N(P_i)^(e_i)`.
    由于 `O_L // P_i` 是 `ZZ // p ZZ` 的 `f_i` 次扩域, 所以
    <span class="formula">
      `N(P_i) = |O_L//P_i|`
      `= |ZZ//p ZZ|^(f_i)`
      `= p^(f_i)`.
    </span>
    于是得到
    <span class="formula">
      `p^n = N(P O_L)`
      `= prod p^(e_i f_i)`
      `= p^(sum e_i f_i)`,
    </span>
    即得结论.
  </li>
</ol>

<ol class="theorem">
  <b>素理想分解的一般方法</b>
  设 `L//K` 是数域的 `n` 次扩张, `L = K(alpha)`, `f` 是 `alpha` 在 `K` 上的最小多项式.
  <li>`O_K[alpha]` 是 `O_L` 的子环, 并且加法商群 `O_L//O_K[alpha]` 是有限群.
    记这个群的阶为 `m`.
  </li>
  <li>
    考虑 `O_K` 的素理想 `P`.
    若 `P !| m`, 则 `P` 在 `O_L` 中的分解可以归结于 `f` 在有限域 `O_K//P` 上的因式分解:
    <span class="formula">
      `f(x) -= prod p_i(x)^(e_i) (mod P)`.
    </span>
    其中每个 `p_i(x)` 是 `O_K/P [x]` 中两两不同的首一不可约多项式.
    那么 `P` 在 `O_L` 的素理想分解为:
    <span class="formula">
      `P O_L = prod P_i^(e_i)`,
    </span>
    其中 `P_i = (P, p_i(alpha))` 是由 `P` 和 `p_i(alpha)` 生成的 `O_L` 的素理想,
    且 `f_i = "deg" p_i(x)`.
  </li>
  <li>`O_K` 中满足 `P | m` 的素理想只有有限个.
    特别当 `O_L = O_K[alpha]` 时, `m = 1`, 必有 `P !| m`.
  </li>
</ol>

<p class="example">
  <b>二次域的理想分解</b>
  设 `K = QQ(sqrt d)`, 其中 `d in ZZ` 无平方因子. 任取素数 `p in ZZ`, 则 `p O_K` 的分解情况如下:
</p>

<table>
  <tr>
    <th>情况</th>
    <th>`p O_K` 的分解</th>
    <th>理想的范</th>
  </tr>
  <tr>
    <td>`p | d(K)`</td>
    <td>完全分歧: `P^2`</td>
    <td>`N(P) = p`</td>
  </tr>
  <tr>
    <td>`p !| d(K)`, `(d/p) = 1`</td>
    <td>完全分裂: `P_1 P_2`</td>
    <td>`N(P_1) = N(P_2) = p`</td>
  </tr>
  <tr>
    <td>`p !| d(K)`, `(d/p) = -1`</td>
    <td>惰性: `P`</td>
    <td>`N(P) = p^2`</td>
  </tr>
</table>

<p class="example">
  <b>分圆域的理想分解</b>
  设 `K = QQ(zeta_n)`, 正整数 `n ge 3`, 且 `n !-= 2 (mod 4)`.
  任取素数 `p in ZZ`, 记 `n = p^l m`, `p !| m`. 则 `p O_K` 的素理想分解中每个素因子的分歧指数都相等,
  换言之
  <span class="formula">
    `p O_K = (prod_(i=1)^g P_i)^e`,<br>
    `e = varphi(p^l)`, `quad f = "ord"_m p`, `quad g = varphi(m)//f`.
  </span>
  这里 `f` 是满足 `p^f -= 1 (mod m)` 的最小正整数.
  验证: 扩张次数等于
  <span class="formula">
    `sum_(i=1)^g e_i f_i`
    `= varphi(p^l) f g`
    `= varphi(p^l) varphi(m)`
    `= varphi(n)`.
  </span>
</p>

<p class="theorem">
  (Dedekind) 素数 `p` 在数域 `K` 中分歧当且仅当 `p | d(K)`.
</p>

<script src="../../js/note.js"></script>
</body>
</html>
